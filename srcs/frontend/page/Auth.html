<script>
    import { writable } from "svelte/store";

    let activeTab = writable("login");
    let username = "";
    let email = "";
    let password = "";

    function handleLogin() {
        console.log("Login attempted", { username, password });
    }

    function handleRegister() {
        console.log("Registration attempted", { username, email, password });
    }
</script>

<div class="auth-container">
    <div class="auth-form">
        <div class="tab-container">
            <button
                class="tab-button"
                class:active="{$activeTab"
                =""
                =""
                ="login"
                }
                on:click="{()"
                =""
            >
                activeTab.set("login")} > Login
            </button>
            <button
                class="tab-button"
                class:active="{$activeTab"
                =""
                =""
                ="register"
                }
                on:click="{()"
                =""
            >
                activeTab.set("register")} > Register
            </button>
        </div>

        {#if $activeTab === "login"}
        <form on:submit|preventDefault="{handleLogin}">
            <h2>Welcome Back</h2>
            <div class="input-group">
                <label for="username">Username</label>
                <input
                    type="text"
                    id="username"
                    bind:value="{username}"
                    required
                />
            </div>
            <div class="input-group">
                <label for="password">Password</label>
                <input
                    type="password"
                    id="password"
                    bind:value="{password}"
                    required
                />
            </div>
            <button type="submit">Log In</button>
        </form>
        {:else}
        <form on:submit|preventDefault="{handleRegister}">
            <h2>Create Account</h2>
            <div class="input-group">
                <label for="reg-username">Username</label>
                <input
                    type="text"
                    id="reg-username"
                    bind:value="{username}"
                    required
                />
            </div>
            <div class="input-group">
                <label for="email">Email</label>
                <input type="email" id="email" bind:value="{email}" required />
            </div>
            <div class="input-group">
                <label for="reg-password">Password</label>
                <input
                    type="password"
                    id="reg-password"
                    bind:value="{password}"
                    required
                />
            </div>
            <button type="submit">Register</button>
        </form>
        {/if}
    </div>
</div>

<style>
    :global(body) {
        margin: 0;
        padding: 0;
        font-family: "Arial", sans-serif;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .auth-container {
        width: 100%;
        max-width: 400px;
        padding: 2rem;
    }

    .auth-form {
        background-color: rgba(24, 24, 37, 0.8);
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 2rem;
    }

    .tab-container {
        display: flex;
        margin-bottom: 1rem;
    }

    .tab-button {
        flex: 1;
        padding: 0.5rem;
        background-color: transparent;
        border: none;
        color: #cdd6f4; /* Catppuccin Mocha text */
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .tab-button.active {
        border-bottom: 2px solid #cba6f7; /* Catppuccin Mocha mauve */
        color: #cba6f7;
    }

    h2 {
        color: #cdd6f4; /* Catppuccin Mocha text */
        margin-bottom: 1.5rem;
        text-align: center;
    }

    .input-group {
        margin-bottom: 1rem;
    }

    label {
        display: block;
        margin-bottom: 0.5rem;
        color: #a6adc8; /* Catppuccin Mocha subtext0 */
    }

    input {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #45475a; /* Catppuccin Mocha surface1 */
        border-radius: 4px;
        background-color: #1e1e2e; /* Catppuccin Mocha base */
        color: #cdd6f4; /* Catppuccin Mocha text */
    }

    button[type="submit"] {
        width: 100%;
        padding: 0.75rem;
        background-color: #cba6f7; /* Catppuccin Mocha mauve */
        color: #1e1e2e; /* Catppuccin Mocha base */
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.3s ease;
    }
    button[type="submit"]:hover {
        background-color: #f5c2e7; /* Catppuccin Mocha pink */
    }

    @media (max-width: 480px) {
        .auth-container {
            padding: 1rem;
        }

        .auth-form {
            padding: 1.5rem;
        }
    }
</style>
